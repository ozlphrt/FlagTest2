<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
	<meta name="theme-color" content="#0b0f14" />
	<meta name="mobile-web-app-capable" content="yes" />
	<link rel="apple-touch-icon" href="icons/192.png">
	<link rel="manifest" href="manifest.json" />
	<title>FlagTest â€” Sorting Game</title>
	<style>
		html,
		body {
			margin: 0;
			padding: 0;
			height: 100%;
			background: #0b0f14;
			color: #e6edf3;
			font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			overflow: hidden;
			touch-action: none;
		}

		canvas {
			display: block;
		}
	</style>
  <script type="module" crossorigin src="./assets/index-Cdltl4lF.js"></script>
</head>
<script>
	// V1.3.1 Inline Bootstrapper (No Auto-Reload)
	(function () {
		const CURRENT_VERSION = '1.3.1';

		function showUpdateNotification() {
			if (document.getElementById('update-notification')) return;
			const div = document.createElement('div');
			div.id = 'update-notification';
			Object.assign(div.style, {
				position: 'fixed', bottom: '24px', left: '50%', transform: 'translateX(-50%)',
				background: '#2563eb', color: 'white', borderRadius: '16px', padding: '16px 24px', zIndex: '100000',
				display: 'flex', alignItems: 'center', gap: '20px', boxShadow: '0 12px 40px rgba(0,0,0,0.6)',
				fontFamily: 'system-ui, sans-serif'
			});
			div.innerHTML = `<div><div style="font-weight:700">Update Available</div><div style="font-size:13px;opacity:0.9">Version ${CURRENT_VERSION} is ready</div></div>
							 <button id="update-btn" style="background:white; color:#2563eb; border:none; padding:10px 20px; border-radius:10px; cursor:pointer; font-weight:800;">Refresh</button>`;
			document.body.appendChild(div);
			document.getElementById('update-btn').onclick = async () => {
				document.getElementById('update-btn').disabled = true;
				if ('serviceWorker' in navigator) {
					const regs = await navigator.serviceWorker.getRegistrations();
					for (const r of regs) await r.unregister();
				}
				if ('caches' in window) {
					const keys = await caches.keys();
					for (const k of keys) await caches.delete(k);
				}
				window.location.href = window.location.origin + window.location.pathname + '?v=' + Date.now();
			};
		}

		fetch('./version.json?t=' + Date.now())
			.then(r => r.json())
			.then(data => {
				const serverV = (data.version || '').replace('v', '');
				const localV = CURRENT_VERSION.replace('v', '');
				if (serverV && serverV !== localV) {
					if (document.body) showUpdateNotification();
					else window.addEventListener('DOMContentLoaded', showUpdateNotification);
				}
			})
			.catch(e => console.error("Boot check failed", e));
	})();
</script>

<body>

</body>

</html>